<div id="page-title">
	<div id="page-meta">
		<div class="aux-actions">

		</div>
		<!--<div class="icon-box">
			<i class="fa fa-database  fa-fw"></i>
		</div>-->
		<div class="entity-box">
			<h4 class="no-link" title="Entities">entities</h4>
			<!--<a ui-sref="webvella-admin-entities"><i class="fa fa-arrow-left"></i> Back to list</a>-->
		</div>
		<div class="spacer-box"></div>
		<div class="divider-box">
			<i class="fa fa-caret-right"></i>
		</div>
		<div class="icon-box">
			<i class="fa fa-{{::contentData.entity.iconName}}  fa-fw"></i>
		</div>
		<div class="entity-box">
			<h4 class="no-link" title="{{::contentData.entity.label}}">{{::contentData.entity.name}}</h4>
		</div>
		<div class="spacer-box"></div>
		<div class="divider-box">
			<i class="fa fa-caret-right"></i>
		</div>
		<div class="lists-box">
			<h4 title="Records lists">records lists</h4>
			<a href="#/admin/entities/{{::contentData.entity.name}}/lists"><i class="fa fa-arrow-left"></i> Back to list</a>
		</div>
		<div class="spacer-box"></div>
		<div class="divider-box">
			<i class="fa fa-caret-right"></i>
		</div>
		<div class="lists-box">
			<h4 class="no-link" title="Manage a Record list">manage</h4>
		</div>
	</div>
	<!--<div id="page-messages">
		<div class="alert alert-warning" role="alert">This is a plugin message dynamically embedded in the page</div>
	</div>-->
</div>
<div id="page-body" style="padding-bottom:3em; ">
	<div class="tabbable tabs-left spilled">
		<a class="back" href="#/admin/entities"><i class="fa fa-fw fa-arrow-left"></i> <span class="text">Back</span></a>
		<ul class="nav nav-tabs">
			<li><a href="#/admin/entities/{{::contentData.entity.name}}"><i class="fa fa-fw fa-info-circle"></i> <span class="text">Details</span></a></li>
			<li><a href="#/admin/entities/{{::contentData.entity.name}}/fields"><i class="fa fa-fw fa-table"></i> <span class="text">Fields</span></a></li>
			<li><a href="#/admin/entities/{{::contentData.entity.name}}/views"><i class="fa fa-fw fa-file-text-o"></i> <span class="text">Record Views</span></a></li>
			<li class="active"><a href="#/admin/entities/{{::contentData.entity.name}}/lists"><i class="fa fa-fw fa-list"></i> <span class="text">Records Lists</span></a></li>
			<li><a href="#/admin/entities/{{::contentData.entity.name}}/trees"><i class="fa fa-fw fa-sitemap"></i> <span class="text">Records Trees</span></a></li>
			<li><a href="#/admin/entities/{{::contentData.entity.name}}/relations"><i class="fa fa-fw fa-link"></i> <span class="text">Relations</span></a></li>
		</ul>

	</div>
	<div id="page-text">
		<div class="view-manage-section">
			<a class="btn btn-link go-red pull-right" ng-click="contentData.deleteListModal()">[ Delete list ]</a>
			<h3 class="page-header">Basic info</h3>
			<div class="panel panel-default" style="margin-top:2em;">
				<div class="panel-body">
					<div class="form">
						<div class="row">
							<div class="col-sm-6">
								<div class="form-group">
									<label class="control-label" for="name">Name</label>
									<span class="not-editable">{{contentData.list.name}}</span>
								</div>
							</div>
							<div class="col-sm-6">
								<div class="form-group">
									<label class="control-label" for="name">Type</label>
									<a href="javascript:void(0)" editable-select="contentData.list.type" e-ng-options="item.key as item.value for item in contentData.listTypeOptions"
									   onbeforesave="contentData.fieldUpdate('type', $data)">
										{{contentData.list.type}}
									</a>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-6">
								<div class="form-group">
									<label class="control-label" for="label">Label</label>
									<a href="javascript:void(0)" editable-text="contentData.list.label"
									   onbeforesave="contentData.fieldUpdate('label',$data)">{{ contentData.list.label}}</a>
								</div>
							</div>
							<div class="col-sm-6">
								<div class="form-group">
									<label class="control-label" for="weight">Weight</label>
									<a href="javascript:void(0)" editable-text="contentData.list.weight" onbeforesave="contentData.fieldUpdate('weight', $data)">{{ contentData.list.weight}}</a>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-6">
								<div class="form-group">
									<label class="control-label" for="name">Default</label>
									<a href="javascript:void(0)" editable-checkbox="contentData.list.default" e-title="Make this default list?"
									   onbeforesave="contentData.fieldUpdate('default', $data)">{{ contentData.list.default && "Default list" || "Not a default list" }}</a>
								</div>
							</div>
							<div class="col-sm-6">
								<div class="form-group">
									<label class="control-label" for="name">System</label>
									<span ng-show="contentData.list.system" class="not-editable"><i class="go-green fa fa-check"></i> true</span>
									<span ng-show="!contentData.list.system" class="not-editable"><i class="go-red fa fa-close"></i> false</span>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-6">
								<div class="form-group">
									<label class="control-label" for="label">CSS Class</label>
									<a href="javascript:void(0)" editable-text="contentData.list.cssClass" onbeforesave="contentData.fieldUpdate('cssClass', $data)">{{ contentData.list.cssClass}}</a>
									<div class="form-description">use "hide-header" and "table-noborder" if needed</div>
								</div>
							</div>
							<div class="col-sm-6">
								<div class="form-group">
									<label class="control-label" for="weight">Icon Name</label>
									<a href="javascript:void(0)" e-typeahead-template-url="iconTypeaheadTemplate.html" editable-text="contentData.list.iconName" onbeforesave="contentData.fieldUpdate('iconName', $data)" e-typeahead="icon for icon in contentData.icons | filter:$viewValue | limitTo:10"><i class="fa fa-fw fa-{{contentData.list.iconName}}"></i> {{ contentData.list.iconName}}</a>
									<div class="form-description">review all icons in <a href="http://fortawesome.github.io/Font-Awesome/icons/" target="_blank">Font Awesome site</a> </div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-6">
								<div class="form-group">
									<label class="control-label" for="weight">Visible columns count</label>
									<a href="javascript:void(0)" editable-text="contentData.list.visibleColumnsCount" onbeforesave="contentData.fieldUpdate('visibleColumnsCount', $data)">{{ contentData.list.visibleColumnsCount}}</a>
								</div>
							</div>
							<div class="col-sm-6">
								<div class="form-group">
									<label class="control-label" for="weight">Page size (zero for unlimitted)</label>
									<a href="javascript:void(0)" editable-text="contentData.list.pageSize" onbeforesave="contentData.fieldUpdate('pageSize', $data)">{{ contentData.list.pageSize}}</a>
								</div>

							</div>
						</div>
						<div class="row">
							<div class="col-sm-12">
								<div class="form-group">
									<label class="control-label" for="weight">View name override</label>
									<a href="javascript:void(0)" editable-text="contentData.list.viewNameOverride" onbeforesave="contentData.fieldUpdate('viewNameOverride', $data)">{{ contentData.list.viewNameOverride}}</a>
									<div class="form-description">you can generate dynamic names with "{fieldDataName}" in the string. DataName needs to be present in the list's data. You can also use "{areaName}", "{entityName}", "{filter}", "{page}", "{searchQuery}". Fields data from relation is supported with the format of its DataName e.g. "{$field$relation_name$label}"</div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-12">
								<div class="form-group">
									<label class="control-label" for="iconName">Dynamic HTML template</label>
									<a href="javascript:void(0)"  editable-text="contentData.list.dynamicHtmlTemplate" ng-bind-html="contentData.renderFieldValue(contentData.list.dynamicHtmlTemplate,{fieldType:18})"
										class="textbox"	   onbeforesave="contentData.fieldUpdate('dynamicHtmlTemplate', $data)">
									</a>
									<div class="form-description">Substitute the default view html template with a custom one. The url link to the template file could be absolute or relative.</div>
								</div>
							</div>
						</div>
					</div>

				</div>
			</div>

			<h3 class="page-header">List Columns</h3>
			<div class="row">
				<div class="col-xs-6">
					<h5>Selected columns <small class="go-gray">| Record Id is always injected in the data. The first column is also the default search column</small></h5>
				</div>
				<div class="col-xs-6">
					<h5>Library</h5>
				</div>
			</div>
			<div class="row">
				<div class="col-xs-6">
					<div class="list-field-selection-box" style="height:400px;">
						<div class="drop-zone">
							<div as-sortable="contentData.dragLibraryListeners" ng-model="contentData.list.columns">
								<div class="dropped-item" ng-model="item" data-as-sortable-item ng-repeat="item in contentData.list.columns track by item.dataName"
									 ng-switch="::item.type">
									<div ng-switch-when="field" class="clearfix">
										<i class="fa fa-fw fa-arrows go-gray pull-left" as-sortable-item-handle></i>
										<a href="javascript:void(0)" class="pull-right" ng-click="contentData.moveToLibrary(item, $index)"><i class="fa fa-fw fa-arrow-right"></i></a>
										<i class="fa fa-fw fa-table go-teal" style="margin-left:10px;"></i> {{::item.meta.name}} <i class="fa fa-fw fa-eye-slash go-red" ng-show="$index + 1 > contentData.list.visibleColumnsCount"></i>
										<span class="note go-green" ng-show="contentData.defaultFieldName == item.meta.name">(default search)</span>
									</div>
									<div ng-switch-when="fieldFromRelation" class="clearfix">
										<i class="fa fa-fw fa-arrows go-gray pull-left" as-sortable-item-handle></i>
										<a href="javascript:void(0)" class="pull-right" ng-click="contentData.moveToLibrary(item, $index)"><i class="fa fa-fw fa-arrow-right"></i></a>
										<i class="fa fa-fw fa-table go-teal" style="margin-left:10px;"></i> <span class="go-gray">{{::item.relationName}}<span class="divider">></span></span>{{::item.meta.name}} <i class="fa fa-fw fa-eye-slash go-red" ng-show="$index + 1 > contentData.list.visibleColumnsCount"></i>
									</div>
									<div ng-switch-when="view" class="clearfix">
										<i class="fa fa-fw fa-arrows go-gray pull-left" as-sortable-item-handle></i>
										<a href="javascript:void(0)" class="pull-right" ng-click="contentData.moveToLibrary(item, $index)"><i class="fa fa-fw fa-arrow-right"></i></a>
										<i class="fa fa-fw fa-file-text-o go-teal" style="margin-left: 10px;"></i> {{::item.meta.name}} <i class="fa fa-fw fa-eye-slash go-red" ng-show="$index + 1 > contentData.list.visibleColumnsCount"></i>
									</div>
									<div ng-switch-when="viewFromRelation" class="clearfix">
										<i class="fa fa-fw fa-arrows go-gray pull-left" as-sortable-item-handle></i>
										<a href="javascript:void(0)" class="pull-right" ng-click="contentData.moveToLibrary(item, $index)"><i class="fa fa-fw fa-arrow-right"></i></a>
										<i class="fa fa-fw fa-file-text-o go-teal" style="margin-left: 10px;"></i> <span class="go-gray">{{::item.relationName}}<span class="divider">></span></span>{{::item.meta.name}} <i class="fa fa-fw fa-eye-slash go-red" ng-show="$index + 1 > contentData.list.visibleColumnsCount"></i>
									</div>
									<div ng-switch-when="list" class="clearfix">
										<i class="fa fa-fw fa-arrows go-gray pull-left" as-sortable-item-handle></i>
										<a href="javascript:void(0)" class="pull-right" ng-click="contentData.moveToLibrary(item, $index)"><i class="fa fa-fw fa-arrow-right"></i></a>
										<i class="fa fa-fw fa-list go-teal" style="margin-left: 10px;"></i> {{::item.meta.name}} <i class="fa fa-fw fa-eye-slash go-red" ng-show="$index + 1 > contentData.list.visibleColumnsCount"></i>
									</div>
									<div ng-switch-when="listFromRelation" class="clearfix">
										<i class="fa fa-fw fa-arrows go-gray pull-left" as-sortable-item-handle></i>
										<a href="javascript:void(0)" class="pull-right" ng-click="contentData.moveToLibrary(item, $index)"><i class="fa fa-fw fa-arrow-right"></i></a>
										<i class="fa fa-fw fa-list go-teal" style="margin-left:10px;"></i> <span class="go-gray">{{::item.relationName}}<span class="divider">></span></span>{{::item.meta.name}} <i class="fa fa-fw fa-eye-slash go-red" ng-show="$index + 1 > contentData.list.visibleColumnsCount"></i>
									</div>
									<div ng-switch-when="treeFromRelation" class="clearfix">
										<i class="fa fa-fw fa-arrows go-gray pull-left" as-sortable-item-handle></i>
										<a href="javascript:void(0)" class="pull-right" ng-click="contentData.moveToLibrary(item, $index)"><i class="fa fa-fw fa-arrow-right"></i></a>
										<i class="fa fa-fw fa-sitemap go-teal" style="margin-left:10px;"></i> <span class="go-gray">{{::item.relationName}}<span class="divider">></span></span>{{::item.meta.name}} <i class="fa fa-fw fa-eye-slash go-red" ng-show="$index + 1 > contentData.list.visibleColumnsCount"></i>
									</div>
									<div ng-switch-when="html" class="clearfix">
										<div ng-if='item.tag == ""'>
											<i class="fa fa-fw fa-arrows go-gray pull-left" as-sortable-item-handle></i>
											<a href="javascript:void(0)" class="pull-right" ng-click="contentData.moveToLibrary(item, $index)"><i class="fa fa-fw fa-arrow-right"></i></a>
											<i class="fa fa-fw fa-code go-teal" style="margin-left:10px;"></i> No tag
										</div>
										<div ng-if='item.tag != ""'>
											<i class="fa fa-fw fa-arrows go-gray pull-left" as-sortable-item-handle></i>
											<a href="javascript:void(0)" class="pull-right" ng-click="contentData.moveToLibrary(item, $index)"><i class="fa fa-fw fa-arrow-right"></i></a>
											<i class="fa fa-fw fa-code go-teal" style="margin-left:10px;"></i> {{::item.tag}}
										</div>
									</div>

								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-xs-6">
					<form class="form" style="margin-bottom:1em;padding:0;background:transparent;border:none;">
						<div class="form-group">
							<div class="input-group">
								<span class="input-group-addon"><i class="fa fa-fw fa-search"></i></span>
								<input type="text" ng-model="contentData.search.dataName" class="form-control" style="width:100%;">
							</div>
						</div>
					</form>
					<div style="height:200px;overflow-y:scroll;">
						<div class="drop-zone-disabled">
							<div as-sortable="contentData.dragControlListeners" ng-model="contentData.library.items">
								<div class="dropped-item" ng-model="item" data-as-sortable-item
									 ng-repeat="item in contentData.library.items | filter: contentData.search track by item.dataName"
									 ng-switch="::item.type">
									<div as-sortable-item-handle ng-switch-when="field" class="clearfix">
										<a href="javascript:void(0)" class="pull-left" ng-click="contentData.moveToColumns(item, $index)"><i class="fa fa-fw fa-arrow-left"></i></a>
										<i class="fa fa-fw fa-table go-teal" style="margin-left:10px;"></i> {{::item.meta.name}}
									</div>
									<div as-sortable-item-handle ng-switch-when="fieldFromRelation" class="clearfix">
										<a href="javascript:void(0)" class="pull-left" ng-click="contentData.moveToColumns(item, $index)"><i class="fa fa-fw fa-arrow-left"></i></a>
										<i class="fa fa-fw fa-table go-teal" style="margin-left:10px;"></i> <span class="go-gray">{{::item.relationName}}<span class="divider">></span></span>{{::item.meta.name}}
									</div>
									<div as-sortable-item-handle ng-switch-when="view" class="clearfix">
										<a href="javascript:void(0)" class="pull-left" ng-click="contentData.moveToColumns(item, $index)"><i class="fa fa-fw fa-arrow-left"></i></a>
										<i class="fa fa-fw fa-file-text-o go-teal" style="margin-left: 10px;"></i> {{::item.meta.name}}
									</div>
									<div as-sortable-item-handle ng-switch-when="viewFromRelation" class="clearfix">
										<a href="javascript:void(0)" class="pull-left" ng-click="contentData.moveToColumns(item, $index)"><i class="fa fa-fw fa-arrow-left"></i></a>
										<i class="fa fa-fw fa-file-text-o go-teal" style="margin-left: 10px;"></i> <span class="go-gray">{{::item.relationName}}<span class="divider">></span></span>{{::item.meta.name}}
									</div>
									<div as-sortable-item-handle ng-switch-when="list" class="clearfix">
										<a href="javascript:void(0)" class="pull-left" ng-click="contentData.moveToColumns(item, $index)"><i class="fa fa-fw fa-arrow-left"></i></a>
										<i class="fa fa-fw fa-list go-teal" style="margin-left: 10px;"></i> {{::item.meta.name}}
									</div>
									<div as-sortable-item-handle ng-switch-when="listFromRelation" class="clearfix">
										<a href="javascript:void(0)" class="pull-left" ng-click="contentData.moveToColumns(item, $index)"><i class="fa fa-fw fa-arrow-left"></i></a>
										<i class="fa fa-fw fa-list go-teal" style="margin-left:10px;"></i> <span class="go-gray">{{::item.relationName}}<span class="divider">></span></span>{{::item.meta.name}}
									</div>
									<div as-sortable-item-handle ng-switch-when="treeFromRelation" class="clearfix">
										<a href="javascript:void(0)" class="pull-left" ng-click="contentData.moveToColumns(item, $index)"><i class="fa fa-fw fa-arrow-left"></i></a>
										<i class="fa fa-fw fa-sitemap go-teal" style="margin-left:10px;"></i> <span class="go-gray">{{::item.relationName}}<span class="divider">></span></span>{{::item.meta.name}}
									</div>
									<div as-sortable-item-handle ng-switch-when="html" class="clearfix">
										<div ng-if='item.tag == ""'>
											<a href="javascript:void(0)" class="pull-left" ng-click="contentData.moveToColumns(item, $index)"><i class="fa fa-fw fa-arrow-left"></i></a>
											<i class="fa fa-fw fa-code go-teal" style="margin-left:10px;"></i> No tag
										</div>
										<div ng-if='item.tag != ""'>
											<a href="javascript:void(0)" class="pull-left" ng-click="contentData.moveToColumns(item, $index)"><i class="fa fa-fw fa-arrow-left"></i></a>
											<i class="fa fa-fw fa-code go-teal" style="margin-left:10px;"></i> {{::item.tag}}
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<br />
					<table class="table table-bordered">
						<thead>
							<tr>
								<th class="go-bkg-white">relations</th>
								<th width="90" class="go-bkg-white">in library</th>
								<th width="115" class="go-bkg-white">direction</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="relation in contentData.library.relations track by relation.relationId">
								<td>
									<div style="overflow-x:hidden;text-overflow:ellipsis;">
										<span ng-show="::contentData.getRelationType(relation.relationId) == 1" class="badge badge-primary badge-inverse ng-hide" title="One to One" style="margin-right:5px;font-size:10px;">1 : 1</span>
										<span ng-show="::contentData.getRelationType(relation.relationId) == 2" class="badge badge-primary badge-inverse ng-hide" title="One to Many" style="margin-right:5px;font-size:10px;">1 : N</span>
										<span ng-show="::contentData.getRelationType(relation.relationId) == 3" class="badge badge-primary badge-inverse ng-hide" title="Many to Many" style="margin-right:5px;font-size:10px;">N : N</span>
										{{::relation.relationName}}
									</div>
								</td>
								<td>
									<a ng-click="contentData.toggleRelationToLibrary(relation)" href="javascript:void(0)" style="color:#2196F3 !important">
										<span class="ng-hide" ng-show="relation.addedToLibrary">remove</span>
										<span class="ng-hide" ng-show="!relation.addedToLibrary">add</span>
									</a>
								</td>
								<td>
									<span class="go-gray" ng-if="!relation.sameOriginTargetEntity" title="only when the origin and target entity is the same in a relation, you can manage the direction">origin ! = target</span>
									<a ng-click="contentData.changeRelationDirection(relation)" href="javascript:void(0)" style="color:#2196F3 !important" ng-if="relation.sameOriginTargetEntity">
										<span class="ng-hide" ng-show="relation.direction == 'origin-target'">origin > target</span>
										<span class="ng-hide" ng-show="relation.direction == 'target-origin'"><span class="go-red">target</span> > origin</span>
									</a>
								</td>
							</tr>
						</tbody>
					</table>
				</div>

			</div>


			<h3 class="page-header">Query</h3>
			<div ng-if="contentData.list.query == null"><a class="btn btn-default" ng-click="contentData.AddSection(null)">add query section</a></div>
			<div ng-if="contentData.list.query != null">
				<query-item current-query="contentData.list.query" parent-query="null" root-query="contentData.list.query" page-scope="contentData" query-index="0"></query-item>
			</div>

			<h3 class="page-header">Sort</h3>
			<div ng-show="contentData.list.sorts == null || contentData.list.sorts.length == 0" class="ng-hide"><a class="btn btn-default" ng-click="contentData.AddSortRule()">add new sort</a></div>
			<div class="panel panel-default" ng-hide="contentData.list.sorts == null || contentData.list.sorts.length == 0">
				<div class="panel-heading clearfix">
					<span class="pull-right">
						<a class="btn btn-default btn-sm" ng-click="contentData.AddSortRule()">add new sort</a>
					</span>
				</div>
				<div class="panel-body">
					<table class="table table-noborder">
						<tr ng-repeat="sortRule in contentData.list.sorts">
							<td style="width:60px"><span ng-if="$index != 0">than</span></td>
							<td>
								<select class="form-control" ng-model="sortRule.sortType" ng-change="contentData.updateSorts()">
									<option value="ascending">sort from low to high by</option>
									<option value="descending">sort from high to low by</option>
								</select>
							</td>
							<td>
								<select class="form-control" ng-model="sortRule.fieldName" ng-change="contentData.updateSorts()" ng-options="item.fieldName as item.meta.name for item in contentData.onlyFieldsLibrary.items"></select>
							</td>
							<td style="width:60px;">
								<a class="btn btn-default go-red" ng-click="contentData.DeleteSortRule($index)"><i class="fa fa-fw fa-close"></i></a>
							</td>
						</tr>
					</table>
				</div>
			</div>

		</div>

	</div>
</div>

<script type="text/ng-template" id="deleteListModal.html">
	<div class="modal-header" id="modal-top">
		<button type="button" class="close" ng-click="popupData.cancel('cancel')" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		<h3 class="modal-title">Delete a list</h3>
	</div>
	<div class="modal-body">
		<div class="alert alert-danger" ng-bind="popupData.errorMessage" ng-show="popupData.hasError"></div>
		<div ng-hide="popupData.hasError">
			<p>Are you sure that you need this list deleted?</p>
		</div>
	</div>
	<div class="modal-footer">
		<button class="btn btn-danger" ng-click="popupData.ok()" ng-hide="popupData.hasError">Delete List</button>
		<button class="btn btn-default" ng-click="popupData.cancel()">Cancel</button>
	</div>
</script>

<script type="text/ng-template" id="iconTypeaheadTemplate.html">
	<a class="typeahead-icon-item">
		<i class="fa fa-{{match.model}} fa-fw go-gray"></i>
		<span ng-bind-html="match.model | typeaheadHighlight:query"></span>
	</a>
</script>

<script type="text/ng-template" id="queryRule.html">
	<table class="table table-noborder">
		<tr>
			<td>
				<select class="form-control" ng-model="currentQuery.fieldName" ng-change="contentData.updateQuery()" ng-options="item.fieldName as item.meta.name for item in contentData.onlyFieldsLibrary.items"></select>
			</td>
			<td>
				<select class="form-control" ng-model="currentQuery.queryType" ng-change="contentData.updateQuery()" ng-options="item.key as item.value for item in contentData.getQueryComparisonOptionsList(currentQuery)"></select>
			</td>
			<td>
				<select class="form-control" disabled>
					<option value="val" selected="">the value</option>
					<!--<option value="valInField">the value in the field</option>-->
				</select>
			</td>
			<td class="position-relative" width="250">
				<div class="editable-field field">
					<a href="javascript:void(0)" style="width: 100%;border: 1px solid #ccc;background-color: white;"
					   editable-text="currentQuery.fieldValue"
					   ng-bind-html="currentQuery.fieldValue"
					   onaftersave="contentData.updateQuery()"></a>
				</div>
				<!--<input class="form-control" ng-model="parentQuery.fieldValue" />-->
			</td>
			<td style="width:60px;">
				<a ng-hide="parentQuery.subQueries.length <= 1" class="btn btn-default go-red" ng-click="contentData.DeleteItem(parentQuery, queryIndex)"><i class="fa fa-fw fa-close"></i></a>
				<span ng-hide="parentQuery.subQueries.length > 1" class="btn go-red " uib-tooltip="section needs to have at least one rule"><i class="fa fa-fw fa-lock"></i></span>
			</td>
		</tr>
	</table>
</script>

<script type="text/ng-template" id="querySection.html">
	<div class="panel panel-default">
		<div class="panel-heading clearfix">
			<span class="pull-right">
				<a class="btn btn-default go-red btn-sm" ng-click="contentData.DeleteItem(parentQuery, queryIndex)"><i class="fa fa-fw fa-close"></i></a>
				<a class="btn btn-default btn-sm" ng-click="contentData.AddSection(currentQuery)">add section</a>
				<a class="btn btn-default btn-sm" ng-click="contentData.AddRule(currentQuery)">add rule</a>
			</span>
			<select class="form-control pull-left" style="width:80px;" ng-model="currentQuery.queryType" ng-change="contentData.updateQuery()">
				<option value="AND">all</option>
				<option value="OR">any</option>
			</select>
			<span class="pull-left" style="line-height:30px;margin-left:5px;">of these rules should be true</span>
		</div>
		<div class="panel-body">
			<!--<div ng-repeat="query in parentQuery.subQueries" ng-include="contentData.getIncludeFile(query)" onload="parent = parentQuery; parentQuery = query"></div>-->
			<query-item ng-repeat="queryItem in currentQuery.subQueries"  
						current-query="queryItem" parent-query="currentQuery" 
						root-query="contentData.list.query" page-scope="contentData"
						query-index="$index"></query-item>
		</div>
	</div>

</script>

