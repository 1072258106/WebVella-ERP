<div id="page-title">
	<div id="page-meta">
		<div class="aux-actions">
			<div class="btn-group" role="group" aria-label="page toolbar">
				<!--<a class="btn btn-default hidden-xs"
					href="#/areas/{{::contentData.currentArea.name}}/{{::contentData.entity.name}}/create?listName={{::contentData.stateParams.listName}}&filter={{::contentData.stateParams.filter}}&page={{::contentData.stateParams.page}}"
					uib-tooltip="Create new record" tooltip-placement="bottom" tooltip-append-to-body="true" tooltip-popup-delay="1000">
						<i class="fa fa-pencil"></i> create
				</a>-->
				<!--<a class="btn btn-default hidden-xs" ng-click="" uib-tooltip-placement="bottom" tooltip="Bookmark the page" tooltip-append-to-body="true"><i class="fa fa-star-o"></i></a>-->
			</div>
		</div>
		<div class="icon-box">
			<i class="fa fa-fw fa-{{::contentData.entity.iconName}} fa-fw"></i>
		</div>
		<div class="entity-box">
			<h4>{{::contentData.entity.labelPlural}}</h4>
			<a target="_blank" href='#/admin/entities/{{::contentData.entity.name}}'><i class="fa fa-gear"></i> Settings</a>
		</div>
		<div class="spacer-box"></div>
		<div class="divider-box">
			<i class="fa fa-caret-right"></i>
		</div>
		<div class="lists-box">
			<h4 title="Newest active offers">{{::contentData.currentListView.label}}</h4>
			<a href="javascript:void(0)" ng-click="contentData.openMoreLists()"><i class="fa fa-fw" ng-class="{'fa-table':!contentData.moreListsOpened, 'fa-caret-down go-red':contentData.moreListsOpened}"></i> Lists and Charts</a>
		</div>
		<uib-accordion>
			<uib-accordion-group is-open="contentData.moreListsOpened">
				<form class="form-inline">
					<div class="form-group">
						<div class="input-group">
							<span class="input-group-addon" id="basic-addon1">
								<i class="fa fa-search"></i>
							</span>
							<input ng-model="contentData.listFilter" type="text" class="form-control" placeholder="list or chart label" focus-me="contentData.moreListsInputFocused">
						</div>
					</div>
					<div class="form-group hidden-xs hidden-sm">
						<div class="filter">
							<div class="field">Actions</div>
							<ul class="criterias list-inline">
								<li>
									<a href="#/admin/entities/{{::contentData.entity.name}}/lists?createNew=true"><i class="fa fa-plus"></i> Create new list</a>
								</li>
								<li>
									<a href="#/admin/entities/{{::contentData.entity.name}}/lists/{{contentData.currentListView.name}}"><i class="fa fa-pencil"></i> Edit this list</a>
								</li>
								<li class="ng-hide" ng-show="!contentData.isCurrentListAreaDefault()">
									<a href="javascript:void(0)" ng-click="contentData.setCurrentListAsDefault()"><i class="fa fa-thumb-tack"></i> Set as default</a>
								</li>
							</ul>
						</div>
					</div>
				</form>
				<hr class="divider" />
				<ul class="list-inline">
					<li style="padding-right:30px;" ng-repeat="list in contentData.entity.recordLists | filter: {label:contentData.listFilter}" ui-sref-active="active">
						<a href="#/areas/{{::contentData.currentArea.name}}/{{::contentData.entity.name}}/{{::list.name}}/all/1">
							<i class="fa fa-fw fa-bars"></i> {{::list.label}}
						</a>
					</li>
				</ul>
			</uib-accordion-group>
		</uib-accordion>
	</div>
	<div id="page-messages" class="hide">
		<div class="alert alert-warning" role="alert">This is a plugin message dynamically embedded in the page</div>
	</div>
</div>
<div id="page-body">
	<form id="filters" class="form-inline hidden-xs hidden-sm">
		<div class="form-group form-group-sm">
			<div class="input-group">
				<div class="btn-group">
					<a class="btn btn-default btn-sm hidden-xs ng-hide" ng-show="contentData.checkEntityPermissions('canCreate')"
					   href="#/areas/{{::contentData.currentArea.name}}/{{::contentData.entity.name}}/create?listName={{::contentData.stateParams.listName}}&filter={{::contentData.stateParams.filter}}&page={{::contentData.stateParams.page}}"
					   uib-tooltip="Create new record" tooltip-placement="bottom" tooltip-append-to-body="true" tooltip-popup-delay="1000">
						<i class="fa fa-pencil"></i> create new
					</a>
					<a class="btn btn-default btn-sm hidden-xs ng-hide" ng-show="contentData.checkEntityPermissions('canCreate,canUpdate')"
					   ng-click="contentData.openImportModal()"
					   uib-tooltip="Import records from CSV by matching the column names as field names. Requires 'id' column." tooltip-placement="bottom" tooltip-append-to-body="true" tooltip-popup-delay="1000">
						<i class="fa fa-upload"></i> import CSV
					</a>
					<a class="btn btn-default btn-sm hidden-xs"
					   ng-click="contentData.openExportModal()"
					   uib-tooltip="Downloads a CSV export of the current list" tooltip-placement="bottom" tooltip-append-to-body="true" tooltip-popup-delay="1000">
						<i class="fa fa-download"></i> export CSV
					</a>
				</div>
			</div>
		</div>

		<div class="form-group form-group-sm" ng-if="::contentData.defaultSearchField != null">
			<div class="input-group">
				<input ng-model="contentData.searchQuery" type="text" class="form-control" placeholder="{{::contentData.searchQueryPlaceholder}}" ng-keydown="contentData.checkForSearchEnter($event)">
				<span class="input-group-btn">
					<a href="javascript:void(0)" class="btn btn-default btn-sm" ng-click="contentData.submitSearchQuery()"><i class="fa fa-fw fa-search"></i></a>
				</span>
			</div>
		</div>
		<div class="form-group  form-group-sm">
			<a class="btn btn-default btn-sm" ng-click="contentData.openSetFiltersModal()" ng-hide="contentData.filterChangeRequested">
				<i class="fa fa-fw fa-filter"></i>
			</a>
			<a class="btn btn-success btn-sm" ng-click="contentData.applyFilterChange()" ng-show="contentData.filterChangeRequested">
				<i class="fa fa-fw fa-check"></i>
			</a>
		</div>
		<div class="form-group" ng-repeat="filterRecord in contentData.filterRecords.data" ng-class="{'pending-removal': contentData.filtersPendingRemoval[filterRecord.field_name]}">
			<div class="filter">
				<div class="field"><a href="" ng-click="contentData.requestFilterRemoval(filterRecord)">{{filterRecord.helper.label}} <i class="fa fa-times-circle"></i></a></div>
				<ul class="criterias list-inline" ng-switch="filterRecord.match_type">
					<li ng-repeat="dataRecord in filterRecord.helper.data" ng-switch-when="exact">
						<span class="go-black" ng-bind-html="dataRecord.label"></span>
					</li>
					<li ng-repeat="dataRecord in filterRecord.helper.data" ng-switch-when="exact_and" style="padding-right:0;">
						<span class="go-gray" ng-show="$index != 0">and </span>
						<span class="go-black" ng-bind-html="dataRecord.label"></span>
					</li>
					<li ng-repeat="dataRecord in filterRecord.helper.data" ng-switch-when="exact_or" style="padding-right:0;">
						<span class="go-gray" ng-show="$index != 0">or </span>
						<span class="go-black" ng-bind-html="dataRecord.label"></span>
					</li>
					<li ng-switch-when="range">
						<span class="go-black" ng-bind-html="filterRecord.helper.data[0].label"></span>
					</li>
					<li ng-switch-when="period">
						<span class="go-black" ng-bind-html="filterRecord.helper.data[0].label"></span>
					</li>
					<li ng-switch-when="regex">
						<!--<span class="go-black"><i>regular expression</i></span>-->
						<span class="go-black" ng-bind-html="filterRecord.helper.data[0].label"></span>
					</li>
				</ul>
			</div>
		</div>

	</form>
	<div id="page-text">
		<table class="table table-bordered table-hover table-vertical-align-middle ng-hide {{::contentData.recordsMeta.cssClass}}" ng-show='::contentData.records.length > 0 && (contentData.recordsMeta.dynamicHtmlTemplate == null || contentData.recordsMeta.dynamicHtmlTemplate == "")'>
			<thead>
				<tr>
					<th class="actions"></th>
					<th class="wv-{{::column.meta.name}}" ng-repeat="column in contentData.recordsMeta.columns | limitTo: contentData.recordsMeta.visibleColumnsCount">{{::column.meta.label}}</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="record in contentData.records">
					<td class="actions">
						<a ng-click="contentData.saveStateParamsToSessionStorage()" href='#/areas/{{::contentData.currentArea.name}}/{{::contentData.entity.name}}/{{::record.id}}/{{::contentData.generateViewName(record)}}/*/*/*' class="btn btn-default btn-sm">
							<i class="fa fa-eye"></i>
						</a>
					</td>
					<td class="wv-{{::column.meta.name}}" ng-repeat="column in contentData.recordsMeta.columns | limitTo: contentData.recordsMeta.visibleColumnsCount">
						<div ng-if="::contentData.currentUserHasReadPermission(column)" ng-switch="::column.type">
							<div ng-switch-when="field">
								<div ng-bind-html="::contentData.renderFieldValue(record[column.dataName],column.meta)"></div>
							</div>
							<div ng-switch-when="fieldFromRelation">
								<div ng-bind-html="::contentData.renderFieldValue(record[column.dataName],column.meta)"></div>
							</div>
							<div ng-switch-when="view">
								<recursive-view view-meta="::column" view-data="::record[column.dataName]"></recursive-view>
							</div>
							<div ng-switch-when="viewFromRelation">
								<recursive-view view-meta="::column" view-data="::record[column.dataName]"></recursive-view>
							</div>
							<div ng-switch-when="list">
								<recursive-list list-meta="::column" list-data="::record[column.dataName]"></recursive-list>
							</div>
							<div ng-switch-when="listFromRelation">
								<recursive-list list-meta="::column" list-data="::record[column.dataName]"></recursive-list>
							</div>
						</div>
						<div ng-if="::!contentData.currentUserHasReadPermission(column)">
							<span class="go-gray"><i class="fa fa-fw fa-lock"></i> hidden</span>
						</div>
					</td>
				</tr>
			</tbody>
		</table>

		<div class="ng-hide" ng-show='::contentData.records.length > 0 && (contentData.recordsMeta.dynamicHtmlTemplate != null && contentData.recordsMeta.dynamicHtmlTemplate != "")'>
			<div ng-include="contentData.recordsMeta.dynamicHtmlTemplate"></div>
		</div>

		<div class="alert alert-info ng-hide" ng-show='::contentData.records.length == 0 && (contentData.recordsMeta.dynamicHtmlTemplate == null || contentData.recordsMeta.dynamicHtmlTemplate == "")'>
			There are no records matching your query
		</div>

		<ul class="pager ng-hide" ng-hide="::contentData.currentPage == 1 && contentData.currentListView.pageSize > contentData.records.length" ng-if="::contentData.currentListView.pageSize != 0">
			<!--<li ng-if="::contentData.currentPage == 1" class="disabled previous"><a href="javascript:void(0)"><i class="fa fa-fw fa-chevron-left"></i> Previous</a></li>-->
			<li ng-if="::contentData.currentPage != 1" class="previous"><a href="javascript:void(0)" ng-click="contentData.selectPage(contentData.currentPage - 1, $event)"><i class="fa fa-fw fa-chevron-left"></i> Previous</a></li>
			<li ng-if="::contentData.currentListView.pageSize <= contentData.records.length" class="next"><a href="javascript:void(0)" ng-click="contentData.selectPage(contentData.currentPage + 1, $event)">Next <i class="fa fa-fw fa-chevron-right"></i></a></li>
			<!--<li ng-if="::contentData.currentListView.pageSize > contentData.records.length" class="disabled next"><a href="javascript:void(0)">Next <i class="fa fa-fw fa-chevron-right"></i></a></li>-->
		</ul>
	</div>
</div>
<script type="text/ng-template" id="setFiltersModalContent.html">
	<div class="modal-header">
		<h4 class="modal-title">Available filters</h4>
	</div>
	<div class="modal-body" ng-class="{'go-bkg-gray-light': popupData.filterColumns.length > 0}">
		<div class="row">
			<div class="col-sm-12">
				<form name="filterForm" class="vertical-tabs-wrapper" ng-if="popupData.filterColumns.length > 0">
					<uib-tabset vertical="true" type="pills">
						<uib-tab heading="{{::column.meta.label}}" select="popupData.tabSelected(column)" ng-repeat="column in popupData.filterColumns" class="{{popupData.getTabExtraCssClass(column)}}">
							<div ng-hide="popupData.tabError" ng-switch="column.type" ng-class="popupData.tabLoading ? 'transparent' : ''">
								<div ng-switch-when="field" ng-switch="column.meta.fieldType">
									<div class="clear"><a ng-show="column.data.length > 0" class="pull-right" href="javascript:void(0)" ng-click="popupData.clearFilter(column)"><i class="fa fa-fw fa-times go-red"></i> clear filter</a> <span style="display:inline-block;min-height:1em;" class="go-green">{{popupData.getFieldTypeName(column)}}</span></div>
									<hr class="divider clear" style="margin-top:0;" />
									<!--Auto increment-->
									<div ng-switch-when="1">
										<div class="form form-clean">
											<div class="form-group">
												<label>Matching type</label>
												<select class="form-control" ng-model="column.match_type"
														ng-options="option.key as option.value for option in popupData.matchTypesDictionary[column.meta.fieldType.toString()]"
														ng-disabled="popupData.isDisabledDropdown(popupData.matchTypesDictionary[column.meta.fieldType.toString()])"></select>
											</div>
											<div ng-switch="column.match_type">
												<div class="form-group" ng-switch-when="exact">
													<label>Value</label>
													<p>Fill in the integer displayed in the format: {{column.meta.displayFormat}}. Starting number is {{column.meta.startingNumber}}</p>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" placeholder="{{column.meta.placeholderText}}" ng-change="popupData.ensureNullOnEmpty(column,0)"
														   pattern="^[0-9]{1,50}$" ng-model-options="{allowInvalid:true}">
													<div class="form-description" ng-hide="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid" style="margin-top: 0.5em;margin-left: 0.5em;">
														{{column.meta.helpText}}
													</div>
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
														<small class="error" ng-show="filterForm.{{column.meta.name}}.$error.pattern">
															only digits are allowed
														</small>
													</div>
												</div>
												<div class="form-group" ng-switch-when="range">
													<label>Range values</label>
													<p>Fill in the integer displayed in the format: {{column.meta.displayFormat}}. Starting number is {{column.meta.startingNumber}}</p>
													<div class="row">
														<div class="col-sm-5">
															<div class="input-group">
																<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name + '_0'}}"
																	   pattern="^[0-9]{1,50}$" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
																<div class="input-group-addon">< =</div>
															</div>
															<div class="error" ng-show="filterForm.{{column.meta.name + '_0'}}.$dirty && filterForm.{{column.meta.name + '_0'}}.$invalid">
																<small class="error" ng-show="filterForm.{{column.meta.name + '_0'}}.$error.pattern">
																	only digits are allowed
																</small>
															</div>

														</div>
														<div class="col-sm-2">
															<div class="form-control-static" style="text-align:center">field value</div>
														</div>
														<div class="col-sm-5">
															<div class="input-group">
																<div class="input-group-addon">< =</div>
																<input type="text" class="form-control" ng-model="column.data[1]" name="{{column.meta.name + '_1'}}"
																	   pattern="^[0-9]{1,50}$" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,1)">
															</div>
															<div class="error" ng-show="filterForm.{{column.meta.name + '_1'}}.$dirty && filterForm.{{column.meta.name + '_1'}}.$invalid">
																<small class="error" ng-show="filterForm.{{column.meta.name + '_1'}}.$error.pattern">
																	only digits are allowed
																</small>
															</div>
														</div>
													</div>
												</div>
												<div class="form-group" ng-switch-when="regex">
													<label>Regular Expression</label>
													<p>Match the integer displayed in the format: {{column.meta.displayFormat}}. Starting number is {{column.meta.startingNumber}}</p>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
											</div>
										</div>
									</div>
									<!--Checkbox-->
									<div ng-switch-when="2">
										<div class="form form-clean">
											<div class="form-group">
												<label>Matching type</label>
												<select class="form-control" ng-model="column.match_type"
														ng-options="option.key as option.value for option in popupData.matchTypesDictionary[column.meta.fieldType.toString()]"
														ng-disabled="popupData.isDisabledDropdown(popupData.matchTypesDictionary[column.meta.fieldType.toString()])"></select>
											</div>
											<div class="form-group">
												<label>Value</label>
												<div class="checkbox radio">
													<label class="radio-inline">
														<input type="radio" name="{{column.meta.name}}" value="true" ng-model="column.data[0]"> true
													</label>
													<label class="radio-inline">
														<input type="radio" name="{{column.meta.name}}" value="false" ng-model="column.data[0]"> false
													</label>
												</div>
												<div class="form-description" style="margin-top: 0.5em;margin-left: 0.5em;">
													{{column.meta.helpText}}
												</div>
											</div>
										</div>
									</div>
									<!-- 3. Currency -->
									<div ng-switch-when="3">
										<div class="form form-clean">
											<div class="form-group">
												<label>Matching type</label>
												<select class="form-control" ng-model="column.match_type"
														ng-options="option.key as option.value for option in popupData.matchTypesDictionary[column.meta.fieldType.toString()]"
														ng-disabled="popupData.isDisabledDropdown(popupData.matchTypesDictionary[column.meta.fieldType.toString()])"></select>
											</div>
											<div ng-switch="column.match_type">
												<div class="form-group" ng-switch-when="exact">
													<label>Value</label>
													<div class="input-group">
														<div class="input-group-addon">{{column.meta.currency.code}}</div>
														<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" placeholder="{{column.meta.placeholderText}}"
															   pattern="^\d+(\.\d{1,5})?$" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													</div>
													<div class="form-description" ng-hide="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid" style="margin-top: 0.5em;margin-left: 0.5em;">
														{{column.meta.helpText}}
													</div>
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
														<small class="error" ng-show="filterForm.{{column.meta.name}}.$error.pattern">
															Decimal, comma or ending on comma is not allowed.
														</small>
													</div>
												</div>
												<div class="form-group" ng-switch-when="range">
													<label>Range values</label>
													<div class="row">
														<div class="col-sm-5">
															<div class="input-group">
																<div class="input-group-addon">{{column.meta.currency.code}}</div>
																<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name + '_0'}}"
																	   pattern="^\d+(\.\d{1,5})?$" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
																<div class="input-group-addon">< =</div>
															</div>
															<div class="error" ng-show="filterForm.{{column.meta.name + '_0'}}.$dirty && filterForm.{{column.meta.name + '_0'}}.$invalid">
																<small class="error" ng-show="filterForm.{{column.meta.name + '_0'}}.$error.pattern">
																	Decimal, comma or ending on comma is not allowed.
																</small>
															</div>
														</div>
														<div class="col-sm-2">
															<div class="form-control-static" style="text-align:center">field value</div>
														</div>
														<div class="col-sm-5">
															<div class="input-group">
																<div class="input-group-addon">< = {{column.meta.currency.code}}</div>
																<input type="text" class="form-control" ng-model="column.data[1]" name="{{column.meta.name + '_1'}}"
																	   pattern="^\d+(\.\d{1,5})?$" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,1)">
															</div>
															<div class="error" ng-show="filterForm.{{column.meta.name + '_1'}}.$dirty && filterForm.{{column.meta.name + '_1'}}.$invalid">
																<small class="error" ng-show="filterForm.{{column.meta.name + '_1'}}.$error.pattern">
																	Decimal, comma or ending on comma is not allowed.
																</small>
															</div>
														</div>
													</div>
												</div>
												<div class="form-group" ng-switch-when="regex">
													<label>Regular Expression</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:true}">
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
											</div>
										</div>
									</div>
									<!--Date-->
									<div ng-switch-when="4">
										<div class="form form-clean">
											<div class="form-group">
												<label>Matching type</label>
												<select class="form-control" ng-model="column.match_type" ng-change="popupData.dateMatchTypeChanged(column)"
														ng-options="option.key as option.value for option in popupData.matchTypesDictionary[column.meta.fieldType.toString()]"
														ng-disabled="popupData.isDisabledDropdown(popupData.matchTypesDictionary[column.meta.fieldType.toString()])"></select>
											</div>
											<div ng-switch="column.match_type">
												<div class="form-group" ng-switch-when="exact">
													<label>Value</label>
													<div class="input-group">
														<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" placeholder="{{column.meta.placeholderText}}"
															   datetime-picker="{{column.meta.format || 'dd MMM yyyy'}}" is-open="popupData.calendars[column.meta.name]" ng-change="popupData.ensureNullOnEmpty(column,0)"
															   enable-date="true" enable-time="false" ng-click="popupData.openCalendar($event, column.meta.name)" ng-model-options="{allowInvalid:true}">
														<span class="input-group-btn">
															<button type="button" class="btn btn-default" ng-click="popupData.openCalendar($event, column.meta.name)"><i class="fa fa-calendar"></i></button>
														</span>
													</div>
													<div class="form-description" ng-hide="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
														{{column.meta.helpText}}
													</div>
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
												<div class="form-group" ng-switch-when="range">
													<label>Range values</label>
													<div class="row">
														<div class="col-sm-5">
															<div class="input-group">
																<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name + '_0'}}" placeholder="{{column.meta.placeholderText}}"
																	   datetime-picker="{{column.meta.format || 'dd MMM yyyy'}}" is-open="popupData.calendars[column.meta.name  + '_0']" ng-change="popupData.ensureNullOnEmpty(column,0)"
																	   enable-date="true" enable-time="false" ng-click="popupData.openCalendar($event, column.meta.name + '_0')" ng-model-options="{allowInvalid:true}">
																<span class="input-group-btn">
																	<button type="button" style="border-radius:0" class="btn btn-default" ng-click="popupData.openCalendar($event, column.meta.name + '_0')"><i class="fa fa-calendar"></i></button>
																</span>
																<div class="input-group-addon">< =</div>
															</div>
															<div class="error" ng-show="filterForm.{{column.meta.name + '_0'}}.$dirty && filterForm.{{column.meta.name + '_0'}}.$invalid">
															</div>
														</div>
														<div class="col-sm-2">
															<div class="form-control-static" style="text-align:center">field value</div>
														</div>
														<div class="col-sm-5">
															<div class="input-group">
																<div class="input-group-addon">< =</div>
																<input type="text" class="form-control" ng-model="column.data[1]" name="{{column.meta.name + '_1'}}" placeholder="{{column.meta.placeholderText}}"
																	   datetime-picker="{{column.meta.format || 'dd MMM yyyy'}}" is-open="popupData.calendars[column.meta.name  + '_1']" ng-change="popupData.ensureNullOnEmpty(column,1)"
																	   enable-date="true" enable-time="false" ng-click="popupData.openCalendar($event, column.meta.name + '_1')" ng-model-options="{allowInvalid:true}">
																<span class="input-group-btn">
																	<button type="button" class="btn btn-default" ng-click="popupData.openCalendar($event, column.meta.name + '_1')"><i class="fa fa-calendar"></i></button>
																</span>

															</div>
															<div class="error" ng-show="filterForm.{{column.meta.name + '_1'}}.$dirty && filterForm.{{column.meta.name + '_1'}}.$invalid">
															</div>
														</div>
													</div>
												</div>
												<div class="form-group" ng-switch-when="period">
													<label>Select period</label>
													<select class="form-control" ng-model="column.data[0]" ng-options="option.key as option.value for option in popupData.periodDictionary"></select>
												</div>
												<div class="form-group" ng-switch-when="regex">
													<label>Regular Expression</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
											</div>
										</div>
									</div>
									<!--Datetime-->
									<div ng-switch-when="5">
										<div class="form form-clean">
											<div class="form-group">
												<label>Matching type</label>
												<select class="form-control" ng-model="column.match_type" ng-change="popupData.dateMatchTypeChanged(column)"
														ng-options="option.key as option.value for option in popupData.matchTypesDictionary[column.meta.fieldType.toString()]"
														ng-disabled="popupData.isDisabledDropdown(popupData.matchTypesDictionary[column.meta.fieldType.toString()])"></select>
											</div>
											<div ng-switch="column.match_type">
												<div class="form-group" ng-switch-when="exact">
													<label>Value</label>
													<div class="input-group">
														<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" placeholder="{{column.meta.placeholderText}}"
															   datetime-picker="{{column.meta.format || 'dd MMM yyyy HH:mm'}}" is-open="popupData.calendars[column.meta.name]" ng-change="popupData.ensureNullOnEmpty(column,0)"
															   enable-date="true" enable-time="true" ng-click="popupData.openCalendar($event, column.meta.name)" ng-model-options="{allowInvalid:true}">
														<span class="input-group-btn">
															<button type="button" class="btn btn-default" ng-click="popupData.openCalendar($event, column.meta.name)"><i class="fa fa-calendar"></i></button>
														</span>
													</div>
													<div class="form-description" ng-hide="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
														{{column.meta.helpText}}
													</div>
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
												<div class="form-group" ng-switch-when="range">
													<label>Range values</label>
													<div class="row">
														<div class="col-sm-5">
															<div class="input-group">
																<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name + '_0'}}" placeholder="{{column.meta.placeholderText}}"
																	   datetime-picker="{{column.meta.format || 'dd MMM yyyy'}}" is-open="popupData.calendars[column.meta.name  + '_0']" ng-change="popupData.ensureNullOnEmpty(column,0)"
																	   enable-date="true" enable-time="true" ng-click="popupData.openCalendar($event, column.meta.name + '_0')" ng-model-options="{allowInvalid:true}">
																<span class="input-group-btn">
																	<button type="button" style="border-radius:0" class="btn btn-default" ng-click="popupData.openCalendar($event, column.meta.name + '_0')"><i class="fa fa-calendar"></i></button>
																</span>
																<div class="input-group-addon">< =</div>
															</div>
															<div class="error" ng-show="filterForm.{{column.meta.name + '_0'}}.$dirty && filterForm.{{column.meta.name + '_0'}}.$invalid">
															</div>
														</div>
														<div class="col-sm-2">
															<div class="form-control-static" style="text-align:center">field value</div>
														</div>
														<div class="col-sm-5">
															<div class="input-group">
																<div class="input-group-addon">< =</div>
																<input type="text" class="form-control" ng-model="column.data[1]" name="{{column.meta.name + '_1'}}" placeholder="{{column.meta.placeholderText}}"
																	   datetime-picker="{{column.meta.format || 'dd MMM yyyy'}}" is-open="popupData.calendars[column.meta.name  + '_1']" ng-change="popupData.ensureNullOnEmpty(column,1)"
																	   enable-date="true" enable-time="true" ng-click="popupData.openCalendar($event, column.meta.name + '_1')" ng-model-options="{allowInvalid:true}">
																<span class="input-group-btn">
																	<button type="button" class="btn btn-default" ng-click="popupData.openCalendar($event, column.meta.name + '_1')"><i class="fa fa-calendar"></i></button>
																</span>

															</div>
															<div class="error" ng-show="filterForm.{{column.meta.name + '_1'}}.$dirty && filterForm.{{column.meta.name + '_1'}}.$invalid">
															</div>
														</div>
													</div>
												</div>
												<div class="form-group" ng-switch-when="period">
													<label>Select period</label>
													<select class="form-control" ng-model="column.data[0]" ng-options="option.key as option.value for option in popupData.periodDictionary"></select>
												</div>
												<div class="form-group" ng-switch-when="regex">
													<label>Regular Expression</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,1)">
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
											</div>
										</div>
									</div>
									<!-- 6. Email -->
									<div ng-switch-when="6">
										<div class="form form-clean">
											<div class="form-group">
												<label>Matching type</label>
												<select class="form-control" ng-model="column.match_type"
														ng-options="option.key as option.value for option in popupData.matchTypesDictionary[column.meta.fieldType.toString()]"
														ng-disabled="popupData.isDisabledDropdown(popupData.matchTypesDictionary[column.meta.fieldType.toString()])"></select>
											</div>
											<div ng-switch="column.match_type">
												<div class="form-group" ng-switch-when="exact">
													<label>Value</label>
													<div class="input-group">
														<div class="input-group-addon"><i class="fa fa-fw fa-envelope"></i></div>
														<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" placeholder="{{column.meta.placeholderText}}" ng-change="popupData.ensureNullOnEmpty(column,0)"
															   pattern="[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?" ng-model-options="{allowInvalid:false}">
													</div>
													<div class="form-description" ng-hide="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid" style="margin-top: 0.5em;margin-left: 0.5em;">
														{{column.meta.helpText}}
													</div>
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
														<small class="error" ng-show="filterForm.{{column.meta.name}}.$error.pattern">
															Invalid email.
														</small>
													</div>
												</div>
												<div class="form-group" ng-switch-when="regex">
													<label>Regular Expression</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
											</div>
										</div>
									</div>
									<!-- 7. File -->
									<div ng-switch-when="7">
										<div class="form form-clean">
											<div class="form-group">
												<label>Matching type</label>
												<select class="form-control" ng-model="column.match_type"
														ng-options="option.key as option.value for option in popupData.matchTypesDictionary[column.meta.fieldType.toString()]"
														ng-disabled="popupData.isDisabledDropdown(popupData.matchTypesDictionary[column.meta.fieldType.toString()])"></select>
											</div>
											<div ng-switch="column.match_type">
												<div class="form-group" ng-switch-when="exact">
													<label>Value</label>
													<p>Type in the file URL as it appears in the lists</p>
													<div class="input-group">
														<div class="input-group-addon">File URL</div>
														<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:false}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													</div>
													<div class="form-description" ng-hide="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid" style="margin-top: 0.5em;margin-left: 0.5em;">
														{{column.meta.helpText}}
													</div>
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
												<div class="form-group" ng-switch-when="regex">
													<label>Regular Expression</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
											</div>
										</div>
									</div>
									<!-- 8. Html -->
									<div ng-switch-when="8">
										<div class="form form-clean">
											<div class="form-group">
												<label>Matching type</label>
												<select class="form-control" ng-model="column.match_type"
														ng-options="option.key as option.value for option in popupData.matchTypesDictionary[column.meta.fieldType.toString()]"
														ng-disabled="popupData.isDisabledDropdown(popupData.matchTypesDictionary[column.meta.fieldType.toString()])"></select>
											</div>
											<div ng-switch="column.match_type">
												<div class="form-group" ng-switch-when="exact">
													<label>Value</label>
													<textarea class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:false}" ng-change="popupData.ensureNullOnEmpty(column,0)"></textarea>
													<div class="form-description" ng-hide="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid" style="margin-top: 0.5em;margin-left: 0.5em;">
														{{column.meta.helpText}}
													</div>
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
												<div class="form-group" ng-switch-when="regex">
													<label>Regular Expression</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
											</div>
										</div>
									</div>
									<!-- 9. Image -->
									<div ng-switch-when="9">
										<div class="form form-clean">
											<div class="form-group">
												<label>Matching type</label>
												<select class="form-control" ng-model="column.match_type"
														ng-options="option.key as option.value for option in popupData.matchTypesDictionary[column.meta.fieldType.toString()]"
														ng-disabled="popupData.isDisabledDropdown(popupData.matchTypesDictionary[column.meta.fieldType.toString()])"></select>
											</div>
											<div ng-switch="column.match_type">
												<div class="form-group" ng-switch-when="exact">
													<label>Value</label>
													<p>Type in the image URL as it appears in the lists</p>
													<div class="input-group">
														<div class="input-group-addon">Image URL</div>
														<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:false}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													</div>
													<div class="form-description" ng-hide="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid" style="margin-top: 0.5em;margin-left: 0.5em;">
														{{column.meta.helpText}}
													</div>
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
												<div class="form-group" ng-switch-when="regex">
													<label>Regular Expression</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
											</div>
										</div>
									</div>
									<!-- 10. Textarea -->
									<div ng-switch-when="10">
										<div class="form form-clean">
											<div class="form-group">
												<label>Matching type</label>
												<select class="form-control" ng-model="column.match_type"
														ng-options="option.key as option.value for option in popupData.matchTypesDictionary[column.meta.fieldType.toString()]"
														ng-disabled="popupData.isDisabledDropdown(popupData.matchTypesDictionary[column.meta.fieldType.toString()])"></select>
											</div>
											<div ng-switch="column.match_type">
												<div class="form-group" ng-switch-when="exact">
													<label>Value</label>
													<textarea class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:false}" ng-change="popupData.ensureNullOnEmpty(column,0)"></textarea>
													<div class="form-description" ng-hide="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid" style="margin-top: 0.5em;margin-left: 0.5em;">
														{{column.meta.helpText}}
													</div>
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
												<div class="form-group" ng-switch-when="regex">
													<label>Regular Expression</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
											</div>
										</div>
									</div>
									<!-- 11. Multiselect -->
									<div ng-switch-when="11">
										<div class="form form-clean">
											<div class="form-group">
												<label>Matching type</label>
												<select class="form-control" ng-model="column.match_type"
														ng-options="option.key as option.value for option in popupData.matchTypesDictionary[column.meta.fieldType.toString()]"
														ng-disabled="popupData.isDisabledDropdown(popupData.matchTypesDictionary[column.meta.fieldType.toString()])"></select>
											</div>
											<div ng-switch="column.match_type">
												<div class="form-group" ng-switch-when="exact_and">
													<label>Value</label>
													<p>All selected values should be exactly matched</p>
													<div class="input-group" ng-repeat="dataValue in column.data" style="margin-bottom:1em;">
														<div class="input-group-addon">{{$index + 1}}</div>
														<input type="text" class="form-control" ng-model="column.data[$index]" name="{{column.meta.name + '_' +  $index}}">
														<span class="input-group-btn">
															<a class="btn btn-default" ng-click="popupData.removeMultiSelectOption($index,column)"><i class="fa fa-times go-red"></i></a>
														</span>
													</div>

													<a href="javascript:void(0)" class="btn btn-success btn-small" ng-click="popupData.addMultiSelectOption(column)">add value</a>
												</div>
												<div class="form-group" ng-switch-when="exact_or">
													<label>Value</label>
													<p>All selected values should be exactly matched</p>
													<div class="input-group" ng-repeat="dataValue in column.data" style="margin-bottom:1em;">
														<div class="input-group-addon">{{$index + 1}}</div>
														<input type="text" class="form-control" ng-model="column.data[$index]" name="{{column.meta.name + '_' +  $index}}">
														<span class="input-group-btn">
															<a class="btn btn-default" ng-click="popupData.removeMultiSelectOption($index,column)"><i class="fa fa-times go-red"></i></a>
														</span>
													</div>

													<a href="javascript:void(0)" class="btn btn-success btn-small" ng-click="popupData.addMultiSelectOption(column)">add value</a>
												</div>
												<div class="form-group" ng-switch-when="regex">
													<label>Regular Expression</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
											</div>
										</div>
									</div>
									<!-- 12. Number -->
									<div ng-switch-when="12">
										<div class="form form-clean">
											<div class="form-group">
												<label>Matching type</label>
												<select class="form-control" ng-model="column.match_type"
														ng-options="option.key as option.value for option in popupData.matchTypesDictionary[column.meta.fieldType.toString()]"
														ng-disabled="popupData.isDisabledDropdown(popupData.matchTypesDictionary[column.meta.fieldType.toString()])"></select>
											</div>
											<div ng-switch="column.match_type">
												<div class="form-group" ng-switch-when="exact">
													<label>Value</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" placeholder="{{column.meta.placeholderText}}"
														   pattern="^\d+(\.\d{1,5})?$" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													<div class="form-description" ng-hide="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid" style="margin-top: 0.5em;margin-left: 0.5em;">
														{{column.meta.helpText}}
													</div>
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
														<small class="error" ng-show="filterForm.{{column.meta.name}}.$error.pattern">
															Decimal, comma or ending on comma is not allowed.
														</small>
													</div>
												</div>
												<div class="form-group" ng-switch-when="range">
													<label>Range values</label>
													<div class="row">
														<div class="col-sm-5">
															<div class="input-group">
																<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name + '_0'}}"
																	   pattern="^\d+(\.\d{1,5})?$" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
																<div class="input-group-addon">< =</div>
															</div>
															<div class="error" ng-show="filterForm.{{column.meta.name + '_0'}}.$dirty && filterForm.{{column.meta.name + '_0'}}.$invalid">
																<small class="error" ng-show="filterForm.{{column.meta.name + '_0'}}.$error.pattern">
																	Decimal, comma or ending on comma is not allowed.
																</small>
															</div>
														</div>
														<div class="col-sm-2">
															<div class="form-control-static" style="text-align:center">field value</div>
														</div>
														<div class="col-sm-5">
															<div class="input-group">
																<div class="input-group-addon">< =</div>
																<input type="text" class="form-control" ng-model="column.data[1]" name="{{column.meta.name + '_1'}}"
																	   pattern="^\d+(\.\d{1,5})?$" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,1)">
															</div>
															<div class="error" ng-show="filterForm.{{column.meta.name + '_1'}}.$dirty && filterForm.{{column.meta.name + '_1'}}.$invalid">
																<small class="error" ng-show="filterForm.{{column.meta.name + '_1'}}.$error.pattern">
																	Decimal, comma or ending on comma is not allowed.
																</small>
															</div>
														</div>
													</div>
												</div>
												<div class="form-group" ng-switch-when="regex">
													<label>Regular Expression</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
											</div>
										</div>
									</div>
									<!-- 13. Password - skip cannot be searchable -->
									<!-- 14. Percent -->
									<div ng-switch-when="14">
										<div class="form form-clean">
											<div class="form-group">
												<label>Matching type</label>
												<select class="form-control" ng-model="column.match_type"
														ng-options="option.key as option.value for option in popupData.matchTypesDictionary[column.meta.fieldType.toString()]"
														ng-disabled="popupData.isDisabledDropdown(popupData.matchTypesDictionary[column.meta.fieldType.toString()])"></select>
											</div>
											<div ng-switch="column.match_type">
												<div class="form-group" ng-switch-when="exact">
													<label>Value</label>
													<div class="input-group">
														<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" placeholder="{{column.meta.placeholderText}}"
															   pattern="^\d+(\.\d{1,5})?$" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
														<div class="input-group-addon">%</div>
													</div>
													<div class="form-description" ng-hide="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid" style="margin-top: 0.5em;margin-left: 0.5em;">
														{{column.meta.helpText}}
													</div>
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
														<small class="error" ng-show="filterForm.{{column.meta.name}}.$error.pattern">
															Decimal, comma or ending on comma is not allowed.
														</small>
													</div>
												</div>
												<div class="form-group" ng-switch-when="range">
													<label>Range values</label>
													<div class="row">
														<div class="col-sm-5">
															<div class="input-group">
																<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name + '_0'}}"
																	   pattern="^\d+(\.\d{1,5})?$" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
																<div class="input-group-addon">% < =</div>
															</div>
															<div class="error" ng-show="filterForm.{{column.meta.name + '_0'}}.$dirty && filterForm.{{column.meta.name + '_0'}}.$invalid">
																<small class="error" ng-show="filterForm.{{column.meta.name + '_0'}}.$error.pattern">
																	Decimal, comma or ending on comma is not allowed.
																</small>
															</div>
														</div>
														<div class="col-sm-2">
															<div class="form-control-static" style="text-align:center">field value</div>
														</div>
														<div class="col-sm-5">
															<div class="input-group">
																<div class="input-group-addon">< =</div>
																<input type="text" class="form-control" ng-model="column.data[1]" name="{{column.meta.name + '_1'}}"
																	   pattern="^\d+(\.\d{1,5})?$" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,1)">
																<div class="input-group-addon">%</div>
															</div>
															<div class="error" ng-show="filterForm.{{column.meta.name + '_1'}}.$dirty && filterForm.{{column.meta.name + '_1'}}.$invalid">
																<small class="error" ng-show="filterForm.{{column.meta.name + '_1'}}.$error.pattern">
																	Decimal, comma or ending on comma is not allowed.
																</small>
															</div>
														</div>
													</div>
												</div>
												<div class="form-group" ng-switch-when="regex">
													<label>Regular Expression</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
											</div>
										</div>
									</div>
									<!-- 15. Phone -->
									<div ng-switch-when="15">
										<div class="form form-clean">
											<div class="form-group">
												<label>Matching type</label>
												<select class="form-control" ng-model="column.match_type"
														ng-options="option.key as option.value for option in popupData.matchTypesDictionary[column.meta.fieldType.toString()]"
														ng-disabled="popupData.isDisabledDropdown(popupData.matchTypesDictionary[column.meta.fieldType.toString()])"></select>
											</div>
											<div ng-switch="column.match_type">
												<div class="form-group" ng-switch-when="exact">
													<label>Value</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:false}">
													<div class="form-description" ng-hide="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid" style="margin-top: 0.5em;margin-left: 0.5em;" ng-change="popupData.ensureNullOnEmpty(column,0)">
														{{column.meta.helpText}}
													</div>
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
												<div class="form-group" ng-switch-when="regex">
													<label>Regular Expression</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
											</div>
										</div>
									</div>
									<!-- 16. Guid -->
									<div ng-switch-when="16">
										<div class="form form-clean">
											<div class="form-group">
												<label>Matching type</label>
												<select class="form-control" ng-model="column.match_type"
														ng-options="option.key as option.value for option in popupData.matchTypesDictionary[column.meta.fieldType.toString()]"
														ng-disabled="popupData.isDisabledDropdown(popupData.matchTypesDictionary[column.meta.fieldType.toString()])"></select>
											</div>
											<div ng-switch="column.match_type">
												<div class="form-group" ng-switch-when="exact">
													<label>Value</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:false}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													<div class="form-description" ng-hide="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid" style="margin-top: 0.5em;margin-left: 0.5em;">
														{{column.meta.helpText}}
													</div>
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
												<div class="form-group" ng-switch-when="regex">
													<label>Regular Expression</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
											</div>
										</div>
									</div>
									<!-- 17. Dropdown -->
									<div ng-switch-when="17">
										<div class="form form-clean">
											<div class="form-group">
												<label>Matching type</label>
												<select class="form-control" ng-model="column.match_type"
														ng-options="option.key as option.value for option in popupData.matchTypesDictionary[column.meta.fieldType.toString()]"
														ng-disabled="popupData.isDisabledDropdown(popupData.matchTypesDictionary[column.meta.fieldType.toString()])"></select>
											</div>
											<div ng-switch="column.match_type">
												<div class="form-group" ng-switch-when="exact">
													<label>Value</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:false}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													<div class="form-description" ng-hide="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid" style="margin-top: 0.5em;margin-left: 0.5em;">
														{{column.meta.helpText}}
													</div>
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
												<div class="form-group" ng-switch-when="regex">
													<label>Regular Expression</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
											</div>
										</div>
									</div>
									<!-- 18. Text -->
									<div ng-switch-when="18">
										<div class="form form-clean">
											<div class="form-group">
												<label>Matching type</label>
												<select class="form-control" ng-model="column.match_type"
														ng-options="option.key as option.value for option in popupData.matchTypesDictionary[column.meta.fieldType.toString()]"
														ng-disabled="popupData.isDisabledDropdown(popupData.matchTypesDictionary[column.meta.fieldType.toString()])"></select>
											</div>
											<div ng-switch="column.match_type">
												<div class="form-group" ng-switch-when="exact">
													<label>Value</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:false}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													<div class="form-description" ng-hide="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid" style="margin-top: 0.5em;margin-left: 0.5em;">
														{{column.meta.helpText}}
													</div>
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
												<div class="form-group" ng-switch-when="regex">
													<label>Regular Expression</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
											</div>
										</div>
									</div>
									<!-- 19. Url -->
									<div ng-switch-when="19">
										<div class="form form-clean">
											<div class="form-group">
												<label>Matching type</label>
												<select class="form-control" ng-model="column.match_type"
														ng-options="option.key as option.value for option in popupData.matchTypesDictionary[column.meta.fieldType.toString()]"
														ng-disabled="popupData.isDisabledDropdown(popupData.matchTypesDictionary[column.meta.fieldType.toString()])"></select>
											</div>
											<div ng-switch="column.match_type">
												<div class="form-group" ng-switch-when="exact">
													<label>Value</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:false}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													<div class="form-description" ng-hide="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid" style="margin-top: 0.5em;margin-left: 0.5em;">
														{{column.meta.helpText}}
													</div>
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
												<div class="form-group" ng-switch-when="regex">
													<label>Regular Expression</label>
													<input type="text" class="form-control" ng-model="column.data[0]" name="{{column.meta.name}}" ng-model-options="{allowInvalid:true}" ng-change="popupData.ensureNullOnEmpty(column,0)">
													<div class="error" ng-show="filterForm.{{column.meta.name}}.$dirty && filterForm.{{column.meta.name}}.$invalid">
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
								<!--fieldFromRelation -->
								<div ng-switch-when="fieldFromRelation">
									<div class="clear"><a ng-show="column.data.length > 0" class="pull-right" href="javascript:void(0)" ng-click="popupData.clearFilter(column)"><i class="fa fa-fw fa-times go-red"></i> clear filter</a> <span style="display:inline-block;min-height:1em;" class="go-green">{{popupData.relatedEntity.labelPlural}}</span></div>
									<hr class="divider clear" style="margin-top:0;" />
									<form id="filters" class="form-inline ng-hide" ng-keypress="popupData.rebindLookupList(column,null,$event)" ng-show="!column.data.length > 0">
										<div class="form-group">
											<div class="input-group">
												<span class="input-group-addon">
													<i class="fa fa-search"></i>
												</span>
												<input ng-model="popupData.helpers[column.dataName].lookupSearch" type="text" class="form-control" placeholder="Search">
											</div>
										</div>
									</form>
									<table class="table table-bordered table-hover table-vertical-align-middle ng-hide" ng-show="popupData.relationLookupList.data.length > 0 && !column.data.length > 0">
										<thead>
											<tr>
												<th class="actions" style="width:80px;" ng-if="popupData.modalMode != 'single-trigger-selection'"></th>
												<th class="actions" style="width:110px;" ng-if="popupData.modalMode == 'single-trigger-selection'"></th>
												<th class="wv-{{column.meta.name}}" ng-repeat="column in popupData.relationLookupList.meta.columns | filter: {meta:{name:'!id'}}">{{column.meta.label}}</th>
											</tr>
										</thead>
										<tbody>
											<tr ng-repeat="record in popupData.relationLookupList.data" ng-class="{'warning': popupData.isSelectedRecord(record.id)}">
												<td ng-if="popupData.helpers[column.dataName].modalMode == 'single-selection'">
													<a ng-click='popupData.lookupSingleSelect(record, column)' href="javascript:void(0)" ng-if="!popupData.isSelectedRecord(record.id)">
														select
													</a>
													<span class="go-red" ng-if="popupData.isSelectedRecord(record.id)">
														selected
													</span>
												</td>
												<td ng-if="popupData.helpers[column.dataName].modalMode == 'multi-selection'">
													<a ng-click='popupData.attachRecord(record)' href="javascript:void(0)" ng-if="!popupData.isSelectedRecord(record.id)">
														select
													</a>
													<a ng-click='popupData.detachRecord(record)' href="javascript:void(0)" ng-if="popupData.isSelectedRecord(record.id)">
														deselect
													</a>
												</td>
												<td class="wv-{{column.meta.name}}" ng-repeat="column in popupData.relationLookupList.meta.columns | filter: {meta:{name:'!id'}}">
													<span ng-bind-html="popupData.renderFieldValue(record[column.dataName],column.meta)"></span>
												</td>
											</tr>
										</tbody>
									</table>
									<div class="ng-hide" ng-show="column.data.length > 0">
										<div ng-if="popupData.helpers[column.dataName].modalMode == 'single-selection'">
											<a class="btn btn-primary" href="javascript:void(0)" ng-click="popupData.clearFilter(column)">
												{{popupData.helpers[column.dataName].selected.label}} <span class="badge" style="margin-left:3px"><i class="fa fa-times go-red"></i></span>
											</a>
										</div>
									</div>
									<div class="alert alert-info ng-hide" ng-show="popupData.relationLookupList.data.length == 0">
										No records found
									</div>
									<ul class="pager" ng-show="!column.data.length > 0">
										<li ng-if="popupData.helpers[column.dataName].lookupCurrentPage != 1" class="previous"><a href="javascript:void(0)" ng-click="popupData.rebindLookupList(column, popupData.helpers[column.dataName].lookupCurrentPage - 1,$event)"><i class="fa fa-fw fa-chevron-left"></i> Previous</a></li>
										<li ng-if="popupData.relationLookupList.meta.pageSize <= popupData.relationLookupList.data.length" class="next"><a href="javascript:void(0)" ng-click="popupData.rebindLookupList(column, popupData.helpers[column.dataName].lookupCurrentPage + 1,$event)">Next <i class="fa fa-fw fa-chevron-right"></i></a></li>
										<!--<li ng-if="popupData.relationLookupList.meta.pageSize > popupData.relationLookupList.data.length" class="disabled next"><a href="javascript:void(0)">Next <i class="fa fa-fw fa-chevron-right"></i></a></li>-->
									</ul>
								</div>
							</div>
							<div ng-class="popupData.tabLoading ? '' : 'transparent'" id="loading-bar-spinner">
								<div class="spinner-icon"></div>
							</div>
							<div class="ng-hide" ng-show="popupData.tabError">
								<div class="alert alert-warning" ng-bind-html="popupData.tabErrorMessage"></div>
							</div>
						</uib-tab>
					</uib-tabset>
				</form>
				<div class="alert alert-warning" ng-if="popupData.filterColumns.length == 0">There are no searchable columns for this list</div>
			</div>
		</div>
	</div>
	<div class="modal-footer">
		<a href="javascript:void(0)" ng-click="popupData.clearAllFilters()" class="btn btn-link go-red pull-left" ng-if="popupData.filterColumns.length > 0">clear all filters</a>
		<button class="btn btn-primary" ng-click="popupData.ok()" ng-if="popupData.filterColumns.length > 0"><i class="fa fa-fw fa-check"></i> Apply</button>
		<button class="btn btn-default" ng-click="popupData.cancel()">Cancel</button>
	</div>
</script>


<script type="text/ng-template" id="exportModalContent.html">
	<div class="modal-header">
		<h4 class="modal-title">Export records</h4>
	</div>
	<div class="modal-body ng-hide" ng-show="!popupData.downloadFilePath">
		<div class="alert alert-danger ng-hide" ng-show="popupData.hasError" ng-bind="popupData.errorMessage"></div>
		<h4>Record fields & order</h4>
		<ul class="list-inline">
			<li class="go-green"><i class="fa fa-table"></i> id</li>
			<li class="go-green"><i class="fa fa-table"></i> name</li>
		</ul>

		<h4 style="margin-top:30px;">Records count</h4>
		<p class="text-muted">This will export a number of records based on the current list filter and sort</p>
		<div class="row">
			<div class="col-xs-6">
			<label class="radio-inline">
			  <input type="radio" name="countOptions" ng-model="popupData.countHasSize" ng-value="true" style="top:6px;"> get the first <input class="form-control" ng-model="popupData.count" style="width:60px;display:inline-block;margin:0 5px;"/> records
			</label>
			</div>
			<div class="col-xs-6" style="padding:6px;">
			<label class="radio-inline">
			  <input type="radio" name="countOptions" ng-model="popupData.countHasSize" ng-value="false"> get all records
			</label>
			</div>
		</div>
	</div>
	<div class="modal-body ng-hide" ng-show="popupData.downloadFilePath">
		<div class="go-green">Success!</div>
		<p>Click on the link bellow in the next 1 hour to download the report. Please have in mind that this link is only for your personal use.</p>
		<div class="form" style="margin:15px 0"><a href="{{popupData.downloadFilePath}}"><i class="fa fa-file"></i> click here to download the export file</a></div>
	</div>
	<div class="modal-footer">
		<a href="javascript:void(0)" ng-click="popupData.ok()" class="btn btn-primary ng-hide"  ng-show="!popupData.downloadFilePath"><i class="fa fa-fw" ng-class="{'fa-download': !popupData.loading, 'fa-spinner fa-spin':popupData.loading}"></i> Export</a>
		<a href="javascript:void(0)" ng-click="popupData.cancel()" class="btn btn-default">Cancel</a>
	</div>
</script>

<script type="text/ng-template" id="importModalContent.html">
	<div class="modal-header">
		<h4 class="modal-title">Import records</h4>
	</div>
	<div class="modal-body record-details">
		<div class="alert alert-danger ng-hide" ng-show="popupData.hasError" ng-bind="popupData.errorMessage"></div>
		<h4>Import CSV</h4>
		<p class="text-muted">The import CSV should have column names matching the names of the imported fields. The first column should be "id" matching the id of the record to be updated. 
		If the 'id' of a record equals 'null', a new record will be created with the provided columns and default values for the missing ones. If "id" does not exists, validation error will be raised</p>
		<div class="form">
			<div class="editable-field field">
				<label class="control-label">Uploaded CSV file</label>
				<div>
					<a ng-show='!popupData.uploadedFilePath && popupData.uploadProgress == 0' href='javascript:void(0)' class='btn btn-default btn-sm ng-hide' ngf-select="popupData.upload(popupData.uploadedFile)" ngf-max-size="20MB" 
					ng-model='popupData.uploadedFile' ngf-multiple='false'>Browse</a>
					<div class="progress ng-hide" ng-show="!popupData.uploadedFilePath && popupData.uploadProgress > 0 && popupData.uploadProgress <= 100">
						<div class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="{{popupData.uploadProgress}}" aria-valuemin="0" aria-valuemax="100" ng-style="{'width': popupData.uploadProgress+'%'}">
							<span ng-show="popupData.uploadProgress < 100">{{popupData.uploadProgress || '0'}}%</span>
							<span ng-show="popupData.uploadProgress == 100">almost done...</span>
						</div>
					</div>
					<div class="input-group file-upload ng-hide" ng-show='popupData.uploadedFilePath'>
						<span class="form-control"><a href="{{popupData.uploadedFilePath}}"><i class="fa fa-file"></i> {{popupData.uploadedFile.name}}</a></span>
						<a class="input-group-addon update" href='javascript:void(0)' ngf-select="popupData.upload(popupData.uploadedFile)" ngf-max-size="20MB" ng-model='popupData.uploadedFile' ngf-multiple='false'><i class="fa fa-fw fa-refresh"></i></a>
						<a class="input-group-addon delete" href="javascript:void(0)" confirmed-click="popupData.deleteFileUpload()" ng-confirm-click="Are you sure?" title="delete file"><i class="fa fa-fw fa-trash-o"></i></a>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="modal-footer">
		<a href="javascript:void(0)" ng-click="popupData.ok()" class="btn btn-primary"><i class="fa fa-fw" ng-class="{'fa-upload': !popupData.loading, 'fa-spinner fa-spin':popupData.loading}"></i> Import</a>
		<a href="javascript:void(0)" ng-click="popupData.cancel()" class="btn btn-default">Cancel</a>
	</div>
</script>