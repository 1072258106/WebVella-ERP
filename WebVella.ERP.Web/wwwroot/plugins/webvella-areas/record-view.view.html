<div id="page-title">
	<div id="page-meta">
		<!--<div class="aux-actions">
			<a class="btn btn-link hidden-xs"><i class="fa fa-plus"></i> Create New</a>
			<a class="btn btn-link hidden-xs"><i class="fa fa-star-o"></i> UnBookmark</a>
			<a class="btn btn-link hidden-xs hidden-sm"><i class="fa fa-pencil-square-o"></i> Edit Inline</a>
			<span class="dropdown  hidden-xs  hidden-sm" dropdown>
				<a class="btn btn-link dropdown-toggle" dropdown-toggle>More <i class="fa fa-caret-down"></i> </a>
				<ul class="dropdown-menu dropdown-menu-right">
					<li>
						<a href>Account settings</a>
					</li>
					<li>
						<a href>Account settings</a>
					</li>
					<li>
						<a href>Account settings</a>
					</li>
				</ul>
			</span>
		</div>-->
		<div class="icon-box">
			<i class="fa fa-users"></i>
		</div>
		<div class="entity-box">
			<h4>{{contentData.currentEntity.label}}</h4>
			<a href="javascript:void(0)" ui-sref="webvella-admin-entity-view-manage-info({entityName:contentData.currentEntity.name,viewName:contentData.recordView.name})"><i class="fa fa-gear"></i> Settings</a>
		</div>
		<div class="spacer-box"></div>
		<div class="divider-box">
			<i class="fa fa-caret-right"></i>
		</div>
		<div class="lists-box">
			<h4 title="{{contentData.recordView.label}}">{{contentData.recordView.label}}</h4>
			<a href="javascript:void(0)" ng-click="moreListsOpened = !moreListsOpened"><i class="fa fa-table"></i> Other Record Views</a>
		</div>
		<div class="spacer-box"></div>
		<div class="divider-box">
			<i class="fa fa-caret-right"></i>
		</div>
		<div class="lists-box">
			<h4 title="{{contentData.viewSection.label}}">{{contentData.viewSection.label}}</h4>
		</div>
		<accordion>
			<accordion-group is-open="moreListsOpened">
				<form class="form-inline">
					<div class="form-group">
						<div class="input-group">
							<span class="input-group-addon" id="basic-addon1">
								<i class="fa fa-search"></i>
							</span>
							<input ng-model="viewFilter" type="text" class="form-control" placeholder="view label">
						</div>
					</div>
					<div class="form-group hidden-xs hidden-sm">
						<div class="filter">
							<div class="field">Actions</div>
							<ul class="criterias list-inline">
								<li>
									<a href=""><i class="fa fa-plus"></i> Create new list</a>
								</li>
								<li>
									<a href=""><i class="fa fa-thumb-tack"></i> Set as default</a>
								</li>
							</ul>
						</div>
					</div>
				</form>
				<hr class="divider" />
				<ul class="list-inline">
					<li  style="padding-right:30px;" ng-repeat="view in contentData.currentEntity.recordViews | filter: {label:viewFilter}" ui-sref-active="active">
						<a ui-sref='webvella-areas-record-view({areaName:contentData.currentArea.name,entityName:contentData.currentEntity.name,recordId:contentData.viewData.id,viewName:view.name})'>
							<i class="fa fa-fw fa-file-text-o"></i> {{view.label
}}
						</a>
					</li>
				</ul>
			</accordion-group>
		</accordion>
	</div>
	<!--<div id="page-messages">
		<div class="alert alert-warning" role="alert">This is a plugin message dynamically embedded in the page</div>
	</div>-->
</div>

<div class="record-details">
	<div class="panel panel-default  {{section.cssClass}}" ng-repeat="section in contentData.contentRegion.sections">
		<div class="panel-heading collapsable ng-hide" ng-show="section.showLabel" ng-click="contentData.toggleSectionCollapse(section)">
			<span class="ng-hide" ng-show="!section.collapsed"><i class="fa fa-fw fa-caret-down"></i></span>
			<span class="ng-hide" ng-show="section.collapsed"><i class="fa fa-fw fa-caret-right"></i></span>
			{{section.label}}
		</div>
		<div class="panel-body ng-hide" ng-hide="section.collapsed && section.showLabel">
			<div class="form-horizontal">

				<div class="row" ng-repeat="row in section.rows">
					<div class="col-sm-{{column.gridColCount}}" ng-repeat="column in row.columns">
						<div class="form-group" ng-repeat="item in column.items">
							<!--If item is field WITH NO relation-->
							<div class="row editable-field field" ng-if="item.type === 'field'">
								<label class="col-sm-3 control-label">{{item.fieldLabel}}</label>
								<div class="col-sm-9 position-relative" ng-switch="item.fieldTypeId">
									<!-- If type 1 - autoincrement -->
									<div ng-switch-when="1" class="form-control-static"
										 ng-bind="contentData.getAutoIncrementString(item)">
									</div>
									<!-- If type 2 - checkbox -->
									<a ng-switch-when="2" href="javascript:void(0)"
									   editable-checkbox="contentData.viewData['{{item.fieldName}}']"
									   e-title="set as TRUE"
									   onbeforesave="contentData.fieldUpdate(item, $data)">
										{{contentData.getCheckboxString(item)}}
									</a>
									<!-- If type 3 - currency -->
									<a ng-switch-when="3" href="javascript:void(0)"
									   editable-text="contentData.viewData['{{item.fieldName}}']"
									   ng-bind="contentData.getCurrencyString(item)"
									   onbeforesave="contentData.fieldUpdate(item, $data)">
									</a>
									<!-- If type 4 - date -->
									<a ng-switch-when="4"
									   ng-if="contentData.viewData[item.fieldName] != null"
									   href="javascript:void(0)"
									   editable-bsdate="contentData.viewData[item.fieldName]"
									   e-datepicker-popup="{{item.meta.format || 'dd MMM yyyy'}}"
									   e-init-date="false"
									   e-is-open="picker.opened"
									   onshow="openPicker()"
									   onhide="closePicker()"
									   ng-bind="contentData.getDateString(item)"
									   onbeforesave="contentData.fieldUpdate(item, $data)">
									</a>
									<a ng-switch-when="4"
									   ng-if="contentData.viewData[item.fieldName] == null"
									   href="javascript:void(0)"
									   editable-bsdate="contentData.viewData['{{item.fieldName}}']"
									   e-datepicker-popup="{{item.meta.format || 'dd MMM yyyy'}}"
									   e-init-date="false"
									   e-is-open="picker.opened"
									   onshow="openPicker()"
									   onhide="closePicker()"
									   onbeforesave="contentData.fieldUpdate(item, $data)">
										<span class="editable-empty">empty</span>
									</a>
									<!-- If type 5 - datetime -->
									<div class="row" ng-switch-when="5">
										<div class="col-sm-6">
											<a ng-if="contentData.viewData[item.fieldName] != null"
											   href="javascript:void(0)"
											   editable-bsdate="contentData.viewData[item.fieldName]"
											   e-datepicker-popup="dd MMM yyyy"
											   e-init-date="false"
											   e-is-open="picker.opened"
											   onshow="openPicker()"
											   onhide="closePicker()"
											   ng-bind="contentData.getDateString(item)"
											   onbeforesave="contentData.fieldUpdate(item, $data)">
											</a>
											<a ng-if="contentData.viewData[item.fieldName] == null"
											   href="javascript:void(0)"
											   editable-bsdate="contentData.viewData['{{item.fieldName}}']"
											   e-datepicker-popup="dd MMM yyyy"
											   e-init-date="false"
											   e-is-open="picker.opened"
											   onshow="openPicker()"
											   onhide="closePicker()"
											   onbeforesave="contentData.fieldUpdate(item, $data)">
												<span class="editable-empty">empty</span>
											</a>
										</div>
										<div class="col-sm-6">
											<a ng-if="contentData.viewData[item.fieldName] != null"
											   href="javascript:void(0)"
											   editable-bstime="contentData.viewData['{{item.fieldName}}']"
											   e-show-meridian="false"
											   e-minute-step="10"
											   ng-bind="contentData.getTimeString(item)"
											   onbeforesave="contentData.fieldUpdate(item, $data)">
											</a>
											<a ng-if="contentData.viewData[item.fieldName] == null"
											   href="javascript:void(0)"
											   editable-bstime="contentData.viewData['{{item.fieldName}}']"
											   e-show-meridian="false"
											   e-minute-step="10"
											   onbeforesave="contentData.fieldUpdate(item, $data)">
												<span class="editable-empty">empty</span>
											</a>
										</div>
									</div>
									<!-- If type 6 - email -->
									<a ng-switch-when="6" href="javascript:void(0)"
									   editable-text="contentData.viewData['{{item.fieldName}}']"
									   ng-bind="contentData.viewData['{{item.fieldName}}'] || 'empty'"
									   onbeforesave="contentData.fieldUpdate(item, $data)">
									</a>
									<!-- If type 7 - fileupload -->
									<div ng-switch-when="7">
										<a ng-show='!contentData.viewData[item.fieldName] && contentData.progress[item.fieldName] == 0' href='javascript:void(0)' class='btn btn-default btn-sm' ngf-change="contentData.upload(contentData.files[item.fieldName],item)" ngf-select ng-model='contentData.files[item.fieldName]' ngf-multiple='false'>Browse</a>
										<div class="progress" ng-show="!contentData.viewData[item.fieldName] && contentData.progress[item.fieldName] > 0 && contentData.progress[item.fieldName] <= 100">
											<div class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="{{contentData.progress[item.fieldName]}}" aria-valuemin="0" aria-valuemax="100" style="width: {{contentData.progress[item.fieldName] || '0'}}%;">
												<span ng-show="contentData.progress[item.fieldName] < 100">{{contentData.progress[item.fieldName] || '0'}}%</span>
												<span ng-show="contentData.progress[item.fieldName] == 100">almost done...</span>
											</div>
										</div>
										<div class="input-group file-upload" ng-show='contentData.viewData[item.fieldName]'>
											<a class="form-control link-icon" href="{{contentData.viewData[item.fieldName]}}" target="_blank">view file</a>
											<a class="input-group-addon" href="javascript:void(0)" confirmed-click="contentData.deleteFileUpload(item)" ng-confirm-click="Are you sure?" style="margin-left:1em;" title="delete file"><i class="fa fa-fw fa-trash-o"></i></a>
										</div>
									</div>
									<!-- If type 8 - html -->
									<div ng-switch-when="8">
										<!--<div style="background:white" ng-model="contentData.viewData['{{item.fieldName}}']" contenteditable="true"></div>-->
										<div class="form-control" ng-model="contentData.viewData[item.fieldName]" ckeditor="editorOptions" contenteditable="true" ng-blur="contentData.htmlFieldUpdate(item)"></div>
									</div>
									<!-- If type 9 - image -->
									<div ng-switch-when="9">
										<a ng-show='!contentData.viewData[item.fieldName] && contentData.progress[item.fieldName] == 0' href='javascript:void(0)' class='btn btn-default btn-sm' ngf-change="contentData.upload(contentData.files[item.fieldName],item)" ngf-select ng-model='contentData.files[item.fieldName]' ngf-multiple='false' accept="image/*">Browse</a>
										<div class="progress" ng-show="!contentData.viewData[item.fieldName] && contentData.progress[item.fieldName] > 0 && contentData.progress[item.fieldName] <= 100">
											<div class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="{{contentData.progress[item.fieldName]}}" aria-valuemin="0" aria-valuemax="100" style="width: {{contentData.progress[item.fieldName] || '0'}}%;">
												<span ng-show="contentData.progress[item.fieldName] < 100">{{contentData.progress[item.fieldName] || '0'}}%</span>
												<span ng-show="contentData.progress[item.fieldName] == 100">almost done...</span>
											</div>
										</div>
										<div class="image-upload" ng-show='contentData.viewData[item.fieldName]'>
											<img class="img-thumbnail" ng-src="{{contentData.viewData[item.fieldName]}}" />
											<a class="delete-link" href="javascript:void(0)" confirmed-click="contentData.deleteFileUpload(item)" ng-confirm-click="Are you sure?" title="delete file"><i class="fa fa-fw fa-trash-o"></i></a>
										</div>
									</div>
									<!-- If type 10 - textarea -->
									<a ng-switch-when="10" href="javascript:void(0)"
									   editable-textarea="contentData.viewData['{{item.fieldName}}']"
									   e-rows="7" e-cols="40"
									   onbeforesave="contentData.fieldUpdate(item, $data)">
										<pre>{{ contentData.viewData[item.fieldName] || 'empty' }}</pre>
									</a>
									<!-- If type 11 - multichoice -->
									<div ng-switch-when="11">
										<a href="#" editable-checklist="contentData.viewData[item.fieldName]" e-ng-options="s.key as s.value for s in item.meta.options" 
										   ng-bind="contentData.getCheckboxlistString(contentData.viewData[item.fieldName],item.meta.options)"
										   onbeforesave="contentData.fieldUpdate(item, $data)">
										</a>
									</div>
									<!-- If type 12 - number -->
									<a ng-switch-when="12" href="javascript:void(0)"
									   editable-text="contentData.viewData['{{item.fieldName}}']"
									   onbeforesave="contentData.fieldUpdate(item, $data)">
										{{ contentData.viewData[item.fieldName] || 'empty' }}
									</a>
									<!-- If type 13 - password -->
									<a ng-switch-when="13" href="javascript:void(0)"
									   editable-text="contentData.dummyPasswordModels['{{item.fieldName}}']"
									   onbeforesave="contentData.fieldUpdate(item, $data)">
										<span class="go-gray" style="font-style:italic">encrypted text</span>
									</a>
									<!-- If type 14 - percent -->
									<a ng-switch-when="14" href="javascript:void(0)"
									   editable-text="contentData.viewData['{{item.fieldName}}']"
									   onbeforesave="contentData.fieldUpdate(item, $data)">
										{{ contentData.viewData[item.fieldName] || 'empty' }}
									</a>
									<!-- If type 15 - phone -->
									<a ng-switch-when="15" href="javascript:void(0)"
									   editable-text="contentData.viewData['{{item.fieldName}}']"
									   ng-bind="contentData.viewData['{{item.fieldName}}'] || 'empty'"
									   onbeforesave="contentData.fieldUpdate(item, $data)">
									</a>
									<!-- If type 16 - unique identifier -->
									<span ng-switch-when="16" class="not-editable" ng-bind="contentData.viewData[item.fieldName] || 'empty'"></span>
									<!-- If type 17 - dropdown -->
									<div ng-switch-when="17">
										<a href="#" editable-select="contentData.viewData[item.fieldName]" e-ng-options="s.key as s.value for s in item.meta.options"
										   ng-bind="contentData.getDropdownString(contentData.viewData[item.fieldName],item.meta.options)"
										   onbeforesave="contentData.fieldUpdate(item, $data)">
										</a>
									</div>
									<!-- If type 18 - textbox -->
									<a ng-switch-when="18" href="javascript:void(0)" 
									   editable-text="contentData.viewData['{{item.fieldName}}']" 
									   ng-bind="contentData.viewData['{{item.fieldName}}'] || 'empty' "
									   onbeforesave="contentData.fieldUpdate(item, $data)"></a>
									<!-- If type 19 - url -->
									<a ng-switch-when="19" href="javascript:void(0)"
									   editable-text="contentData.viewData['{{item.fieldName}}']"
									   ng-bind="contentData.viewData['{{item.fieldName}}'] || 'empty' "
									   onbeforesave="contentData.fieldUpdate(item, $data)"></a>

								</div>
							</div>
							<!--If item is field WITH relation-->
							<div class="row editable-field" ng-if="item.type === 'fieldFromRelation'">
								<label class="col-sm-3 control-label">{{item.fieldLabel}}</label>
								<div class="col-sm-9 position-relative">
									<p class="form-control-static"><a href="#" onclick="alert('show lookup modal')" ng-bind="contentData.viewData['{{item.fieldName}}']['name'] || 'empty' "></a></p>
								</div>
							</div>

						</div>
					</div>
				</div>

			</div>
		</div>
	</div>

</div>
