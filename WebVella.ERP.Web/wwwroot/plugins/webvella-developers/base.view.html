<div id="developers" ui-view="contentView">
	<!--<div><button ng-click="pluginData.createSampleQueryDataStructure()">create sample query data structure</button></div>
	<div><button ng-click="pluginData.executeSampleQuery()">execute sample query</button></div>-->
	<!--<div class="button" ngf-select ng-model="pluginData.files" ngf-multiple="false">Select File</div>

	<img ngf-src="pluginData.files[0]" ngf-default-src="'/thumb.jpg'" ngf-accept="'image/*'">

	<div><button ng-click="pluginData.executeSampleRelationRecordUpdate()">execute sample relation record update</button></div>-->
	

	<p>
	<a href="javascript:void(0)" class="btn btn-sm btn-default" ng-click="pluginData.collapseAll()">collapse all</a>
		<a href="javascript:void(0)" class="btn btn-sm btn-default" ng-click="pluginData.expandAll()">expand all</a>
		<a href="javascript:void(0)" class="btn btn-sm btn-default" ng-click="pluginData.clearSelection()">clear selection</a>
	</p>
	<tree-view class="tree" tree-branches="::pluginData.treeBranches"
			   selected-tree-records="pluginData.selectedTreeRecords"
			   collapsed-tree-nodes="pluginData.collapsedTreeNodes"
			   selectable-node-ids ="pluginData.selectableNodeIds"
			   tree-meta="::pluginData.treeMeta"
			   field-meta="::pluginData.itemMeta"></tree-view>

</div>
<script type="text/ng-template" id="treeView.html">
	<ul role="tree" ng-cloak>
		<li role="treeitem" ng-repeat="node in treeBranches track by node.id" 
				ng-class="{parent_li: node.nodes.length > 1, hovered: attachHoverEffectClass[node.id], collapsed:isNodeCollapsed(node.id)}" >
				<div class="btn-group" ng-if="::node.nodes.length == 0">
					<a class="btn" 
						ng-class="{'btn-success': isRecordSelected(node.recordId),'btn-default': !isRecordSelected(node.recordId),'disabled':!isNodeSelectable(node.id)}"
						ng-click="toggleNodeSelected(node)" href="javascript:void(0)">
						{{::node.label}} 
						<span ng-switch="isRecordSelected(node.recordId)">
							<i class="fa fa-fw fa-times go-red" ng-switch-when="true"></i>
							<span ng-switch="isNodeSelectable(node.id)" ng-switch-when="false">
								<i class="fa fa-fw fa-check" ng-switch-when="true"></i>
								<i class="fa fa-fw fa-lock" ng-switch-when="false"></i>
							</span>
						</span>
					</a>
				</div>

				<div class="btn-group"  ng-if="::node.nodes.length > 0">
					<a class="btn btn-default node" ng-mouseenter="attachHoverEffectClass[node.id] = true" ng-mouseleave="attachHoverEffectClass[node.id] = false"
						ng-click="toggleNodeCollapse(node)" href="javascript:void(0)">
						<i class="fa fa-minus-circle"></i>
					</a>
					<a class="btn" 
						ng-class="{'btn-success': isRecordSelected(node.recordId),'btn-default': !isRecordSelected(node.recordId),'disabled':!isNodeSelectable(node.id)}"
						ng-click="toggleNodeSelected(node)" href="javascript:void(0)">
						{{::node.label}} 
						<span ng-switch="isRecordSelected(node.recordId)">
							<i class="fa fa-fw fa-times go-red" ng-switch-when="true"></i>
							<span ng-switch="isNodeSelectable(node.id)" ng-switch-when="false">
								<i class="fa fa-fw fa-check" ng-switch-when="true"></i>
								<i class="fa fa-fw fa-lock" ng-switch-when="false"></i>
							</span>
						</span>
					</a>
				</div>
				<tree-view tree-branches="::node.nodes"
						   selected-tree-records="selectedTreeRecords"
						   collapsed-tree-nodes="collapsedTreeNodes"
						   selectable-node-ids ="selectableNodeIds"
						   tree-meta="::treeMeta"
						   field-meta="::fieldMeta"
						   ng-if="::node.nodes.length > 0"></tree-view>
		</li>
	</ul>
</script>